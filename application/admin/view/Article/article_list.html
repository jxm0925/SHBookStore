<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- BEGIN META --> 
    <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="">
      <meta name="author" content="Custom Theme">
    <!-- END META -->
     
      <!-- BEGIN SHORTCUT ICON -->
    <link rel="shortcut icon" href="__ADMIN_IMAGE__/favicon.ico">
    <!-- END SHORTCUT ICON -->
      <title>role</title>
    
    <!-- BEGIN STYLESHEET --> 
      <link href="__ADMIN_CSS__/bootstrap.min.css" rel="stylesheet"><!-- BOOTSTRAP CSS -->
      <link href="__ADMIN_CSS__/bootstrap-reset.css" rel="stylesheet"><!-- BOOTSTRAP CSS -->
      <link href="__ASSETS__/font-awesome/css/font-awesome.css" rel="stylesheet"><!-- FONT AWESOME ICON STYLESHEET -->
      <link rel="stylesheet" href="__ASSETS__/data-tables/DT_bootstrap.css"><!-- DATATABLE CSS -->
      <link href="__ADMIN_CSS__/style.css" rel="stylesheet"><!-- THEME BASIC CSS -->
      <link href="__ADMIN_CSS__/style-responsive.css" rel="stylesheet"><!-- THEME BASIC RESPONSIVE  CSS -->
      <!--[if lt IE 9]>
      <script src="__ADMIN_JS__/html5shiv.js"></script>
      <script src="__ADMIN_JS__/respond.min.js"></script>
      <![endif]-->
    <!-- END STYLESHEET --> 
   </head>
   <body>
   <!-- BEGIN SECTION --> 
         <!-- BEGIN SECTION -->
    {include file="common/admin/head.html"}
    <!-- END HEADER NAV -->
        
     <!-- START USER LOGIN DROPDOWN  -->

      <!-- END HEADER -->
         <!-- BEGIN SIDEBAR -->
      {include file="common/admin/left.html"}
      <!-- END SIDEBAR --> 
     
     <!-- BEGIN MAIN CONTENT --> 
         <section id="main-content">
        <!-- BEGIN WRAPPER  -->
            <section class="wrapper site-min-height">
               <section class="panel">
                  <header class="panel-heading">
                     <span class="label label-primary">文章列表</span>
                     <span class="tools pull-right">
                     <a href="javascript:;" class="fa fa-chevron-down"></a>                     
                     </span>
                  </header>
                  <div class="panel-body">
                     <div class="adv-table editable-table ">
                        <div class="clearfix">
                           <div class="btn-group">
                              <button id="editable-sample_new" class="btn btn-success green">
                              批量删除 <i class="fa fa-plus"></i>
                              </button>
                           </div>
                           <div class="btn-group">
                              <button id="editable-sample_new" class="btn btn-success green" onclick="location='{:url('article_add')}'"><lable>新增公告</lable><i class="fa fa-plus"></i>
                              </button>
                           </div>
                           <div class="btn-group pull-right">
                              <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">Tools <i class="fa fa-angle-down"></i>
                              </button>
                              <ul class="dropdown-menu pull-right">
                                 <li><a href="#">Print</a></li>
                                 <li><a href="#">Save as PDF</a></li>
                                 <li><a href="#">Export to Excel</a></li>
                              </ul>
                           </div>
                        </div>
                        <br>
                        <div class="btn-group" role="group"> 
                          <a class="btn btn-default" onClick="select()">全选</a> 
                          <a class="btn btn-default" onClick="reverse()">反选</a> 
                          <a class="btn btn-default" onClick="noselect()">不选</a>
                        </div>
                        <div class="space15"></div>
                          <table class="table table-bordered">
                            <caption>公告列表</caption>
                            <thead>
                              <tr>
                                <th></th>
                                <th>id</th>
                                <th>发布者</th>
                                <th>发布时间</th>
                                <th>标题</th>
                                <th>操作</th>
                              </tr>
                            </thead>
                            <tbody>
                              {if !empty($list)}
                              {foreach $list as $v}
                              <tr>
                                <td><input type="checkbox" name="checkbox[]" value="{$v.notice_id}"></td>

                                <td>{$v.notice_id}</td>
                                <td class="admin_name">{$v.admin_name}</td>
                                <td>{$v.create_time}</td>
                                <td class="notice_name">{$v.notice_name}</td>
                                <td>
                                  <input type="hidden" class="noticeID" value="{$v.notice_id}">
                                  <button class="btn btn-xs btn-info showModal" data-toggle="modal" data-target="#myModal"><i class="fa fa-edit"></i></button>
                                 
                                  <button class="btn btn-xs btn-danger del"><i class="fa fa-trash-o"></i></button>
                                </td>
                              </tr>
                              {/foreach}
                              {/if}
                            </tbody>
                          </table>
                         {$list->render()}
                     </div>
                  </div>
               </section>
            </section>
      <!-- END WRAPPER  -->
        </section>
        <!-- 模态框（Modal） -->
          <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h4 class="modal-title" id="myModalLabel">修改通知</h4>
                      </div>
                      <div class="modal-body">
                      <form action="{:url('editNotice')}" method="post">
                          <div class="form-group">  
                          <label>ID</label> 
                          <label class="id" name="id"></label>
                          <input type="hidden" class="hiddenID" value="" name="nid">
                          <br />
                          <label>发布人</label> 
                          <label class="admin"></label>
                          <br />
                          <label>通知标题</label> 
                          <input type="text" class="form-control title" value="" name="notice_title">  
                          <label>通知内容</label> 
                          <textarea class="form-control content" name="content"></textarea> 
                        </div>   
                        </div>  
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                            <button type="submit" class="btn btn-primary">提交更改</button>
                        </div>
                     </form>         
                  </div>
              </div>
          </div>   
       <!-- END MAIN CONTENT --> 
       <!-- BEGIN FOOTER --> 
           <footer class="site-footer">
              <div class="text-center">
                 2013 &copy; Olive Admin by <a href="" target="_blank">Custom Theme</a>.
                 <a href="http://www.mycodes.net" class="go-top">
                 <i class="fa fa-angle-up"></i>
                 </a>
              </div>
         </footer>
     <!-- END FOOTER --> 
      </section>
    <!-- END SECTION -->

<!-- BEGIN JS -->     
    <script type="text/javascript" src="__ADMIN_JS__/table_choose.js"></script><!--全选-->
    <script src="__ADMIN_JS__/jquery-1.8.3.min.js" ></script><!-- BASIC JS LIABRARY 1.8.3 -->
    <script src="__ADMIN_JS__/bootstrap.min.js" ></script><!-- BOOTSTRAP JS  -->
    <script src="__ADMIN_JS__/jquery.dcjqaccordion.2.7.js"></script><!-- ACCORDING JS -->
    <script src="__ADMIN_JS__/jquery.scrollTo.min.js" ></script><!-- SCROLLTO JS  -->
    <script src="__ADMIN_JS__/jquery.nicescroll.js" > </script><!-- NICESCROLL JS  -->
    <script src="__ASSETS__/data-tables/jquery.dataTables.js"></script><!-- DATATABLE JS  -->
    <script src="__ASSETS__/data-tables/DT_bootstrap.js"></script><!-- DATATABLE JS  -->
    <script src="__ADMIN_JS__/respond.min.js" ></script><!-- RESPOND JS  -->
    <script src="__ADMIN_JS__/common-scripts.js" ></script><!-- BASIC COMMON JS  -->
    <script src="__ADMIN_JS__/editable-table.js" ></script><!-- EDITABLE TABLE JS  -->
    <script src="__ASSETS__/layer/layer.js" type="text/javascript" ></script>
    <script src="__ASSETS__/laydate/laydate.js" type="text/javascript"></script>
      <script >
       <!-- EDITABLE TABLE FUNCTION  -->
         jQuery(document).ready(function() {
             EditableTable.init();
         });
      </script>
    <!-- END JS --> 
   </body>
</html>
<script type="text/javascript">
  //var($('.noticeID'));
  $('.showModal').each(function(i,obj){
    $(this).click(function(){
      $(".id").text($(".noticeID").eq(i).attr('value'));
      $(".hiddenID").val($(".noticeID").eq(i).attr('value'));
      $(".admin").text($(".admin_name").eq(i).text());
      $(".title").val($(".notice_name").eq(i).text());
      $.post("{:url('selectNotice')}",{noticeid:$(".noticeID").eq(i).attr('value')},function(data){
        $(".content").val(data.notice);
      },'json');
    })
  });
/* $('.del').click(function(){
      var r = confirm('确定要删除吗');
      if(r)
      {
          if(data)
          {
            window.location.reload()
          }
        },'json');
      }
      else
      {
        alert('不修改');
      }
    })
  });*/
  $('.del').click(function(){
    var obj = $(this);
      layer.confirm('确定删除吗', {
      btn: ['确定','取消'] //按钮
      }, function(){
        layer.msg('删除成功', {icon: 1});
        $.post("{:url('delNotice')}",{noticeid:obj.siblings('.noticeID').val()},function(data){
          if(data)
          {
            obj.parent().parent().remove();
          }
        },'json')
      }, function(){
        layer.msg('已取消',{icon:5});
      });
    })
</script>


